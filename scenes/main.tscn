[gd_scene format=3 uid="uid://obrs4j5f5gs0"]

[ext_resource type="PackedScene" uid="uid://nsyrijlcxkug" path="res://scenes/frank/player.tscn" id="1_o5qli"]
[ext_resource type="PackedScene" uid="uid://dl8625vddcehn" path="res://Assets/models/barrel.glb" id="2_0wfyh"]
[ext_resource type="Material" uid="uid://c5768v54l7tjp" path="res://Assets/materials/floor.tres" id="3_sugp2"]
[ext_resource type="PackedScene" uid="uid://dd8ppnse7mnii" path="res://Assets/prefabs/mask.tscn" id="4_jyhfs"]
[ext_resource type="PackedScene" uid="uid://cuog6afdg1i55" path="res://Assets/prefabs/machete.tscn" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://bugqgk471x74t" path="res://Assets/scripts/collectable.gd" id="6_tefeu"]
[ext_resource type="Shader" uid="uid://cl8ex1kafi25j" path="res://Assets/Shaders/horrorwobble.gdshader" id="7_tipki"]
[ext_resource type="Shader" uid="uid://cuq40omywk1u" path="res://Assets/Shaders/visibility.gdshader" id="8_85g3d"]
[ext_resource type="Texture2D" uid="uid://bokfy5j716cdy" path="res://Assets/img/Smiley.png" id="8_choun"]
[ext_resource type="Script" uid="uid://dh57ciddb87e" path="res://scenes/status_ui.gd" id="8_ya4ey"]
[ext_resource type="Shader" uid="uid://daw6byy23fjtw" path="res://Assets/Shaders/glow.gdshader" id="9_ya4ey"]
[ext_resource type="Texture2D" uid="uid://c75kniy87hn28" path="res://Assets/img/face.png" id="11_eb6dy"]
[ext_resource type="Texture2D" uid="uid://bxmfu1fwysr8k" path="res://Assets/img/discovered.png" id="13_trceg"]
[ext_resource type="Texture2D" uid="uid://dogh0q5q1tcue" path="res://Assets/img/tony.png" id="14_a8y0u"]
[ext_resource type="PackedScene" uid="uid://cm3jv1yi67ac2" path="res://Assets/prefabs/enemy.tscn" id="15_jkv2x"]

[sub_resource type="BoxMesh" id="BoxMesh_0wfyh"]

[sub_resource type="BoxShape3D" id="BoxShape3D_o5qli"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_0wfyh"]
height = 1.0066528
radius = 0.40966797

[sub_resource type="PlaneMesh" id="PlaneMesh_sugp2"]
subdivide_width = 32
subdivide_depth = 32

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_sugp2"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_choun"]
shader = ExtResource("7_tipki")
shader_parameter/brightnessMult = 2.0000000298024
shader_parameter/wiggleMult = 0.00369999990639
shader_parameter/chromaticAberrationOffset = 0.00170999995725

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ya4ey"]
shader = ExtResource("8_85g3d")
shader_parameter/_CirclePosition = Vector2(0.5, 0.5)
shader_parameter/_Progress = 0.749999983236
shader_parameter/_Smoothness = 0.54
shader_parameter/_Background = Color(0, 0, 0, 1)

[sub_resource type="AtlasTexture" id="AtlasTexture_trceg"]
atlas = ExtResource("11_eb6dy")
region = Rect2(0, 0, 206, 315)

[sub_resource type="AtlasTexture" id="AtlasTexture_a8y0u"]
atlas = ExtResource("11_eb6dy")
region = Rect2(206, 0, 206, 315)

[sub_resource type="AtlasTexture" id="AtlasTexture_jkv2x"]
atlas = ExtResource("11_eb6dy")
region = Rect2(412, 0, 206, 315)

[sub_resource type="AtlasTexture" id="AtlasTexture_jbj1t"]
atlas = ExtResource("11_eb6dy")
region = Rect2(618, 0, 206, 315)

[sub_resource type="SpriteFrames" id="SpriteFrames_muem4"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_trceg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a8y0u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jkv2x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jbj1t")
}],
"loop": true,
"name": &"uncomfortable",
"speed": 1.0
}]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_trceg"]
shader = ExtResource("9_ya4ey")
shader_parameter/active = true
shader_parameter/border_threshold = Vector2(0.01, 0.01)

[sub_resource type="AtlasTexture" id="AtlasTexture_muem4"]
atlas = ExtResource("13_trceg")
region = Rect2(0, 0, 200, 338)

[sub_resource type="AtlasTexture" id="AtlasTexture_dp3eg"]
atlas = ExtResource("13_trceg")
region = Rect2(200, 0, 200, 338)

[sub_resource type="AtlasTexture" id="AtlasTexture_0ld40"]
atlas = ExtResource("13_trceg")
region = Rect2(400, 0, 200, 338)

[sub_resource type="AtlasTexture" id="AtlasTexture_gqmmt"]
atlas = ExtResource("13_trceg")
region = Rect2(600, 0, 200, 338)

[sub_resource type="SpriteFrames" id="SpriteFrames_yc10j"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_muem4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dp3eg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0ld40")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gqmmt")
}],
"loop": true,
"name": &"disco",
"speed": 2.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_yc10j"]
atlas = ExtResource("14_a8y0u")
region = Rect2(0, 0, 202, 321)

[sub_resource type="AtlasTexture" id="AtlasTexture_jscy8"]
atlas = ExtResource("14_a8y0u")
region = Rect2(203, 0, 202, 321)

[sub_resource type="AtlasTexture" id="AtlasTexture_pm3ni"]
atlas = ExtResource("14_a8y0u")
region = Rect2(406, 0, 202, 321)

[sub_resource type="AtlasTexture" id="AtlasTexture_y6deb"]
atlas = ExtResource("14_a8y0u")
region = Rect2(609, 0, 202, 321)

[sub_resource type="SpriteFrames" id="SpriteFrames_og1vs"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yc10j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jscy8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pm3ni")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_y6deb")
}],
"loop": true,
"name": &"tony",
"speed": 2.0
}]

[node name="Main2" type="Node3D" unique_id=1620113986]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="." unique_id=776660648]
transform = Transform3D(0.9563048, -0.18120582, 0.2294464, 0, 0.7847764, 0.619779, -0.2923717, -0.5926976, 0.7504854, 8.052783, 4.894579, 5.225317)

[node name="Player" parent="." unique_id=482459206 instance=ExtResource("1_o5qli")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 0, 1.0020583, 0)

[node name="Box" type="RigidBody3D" parent="." unique_id=873636186]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.495, 0.5042703, 0)
gravity_scale = 0.0

[node name="MeshInstance3D" type="MeshInstance3D" parent="Box" unique_id=726660012]
mesh = SubResource("BoxMesh_0wfyh")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Box" unique_id=1583824835]
shape = SubResource("BoxShape3D_o5qli")

[node name="Barrel" type="RigidBody3D" parent="." unique_id=41694316]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.4303575, 1.4980721, 0)

[node name="barrel" parent="Barrel" unique_id=1297360253 instance=ExtResource("2_0wfyh")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Barrel" unique_id=998663025]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0066833496, 0)
shape = SubResource("CylinderShape3D_0wfyh")

[node name="Floor" type="StaticBody3D" parent="." unique_id=194829682]

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor" unique_id=2038358976]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
material_override = ExtResource("3_sugp2")
mesh = SubResource("PlaneMesh_sugp2")
skeleton = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor" unique_id=1810324538]
transform = Transform3D(10, 0, 0, 0, 10, 0, 0, 0, 10, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_sugp2")

[node name="Mask" parent="." unique_id=439555137 instance=ExtResource("4_jyhfs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9541563, 1, -2.5315638)

[node name="Machete" parent="." unique_id=1920632882 instance=ExtResource("5_tbgi4")]
transform = Transform3D(0.95456344, -0.27176583, -0.12227895, -0.039212406, 0.29221076, -0.9555497, 0.29541698, 0.91692764, 0.2682771, 0.32453412, 0.9999999, -1.7064006)
script = ExtResource("6_tefeu")

[node name="UI" type="CanvasLayer" parent="." unique_id=73623557]

[node name="CRT" type="ColorRect" parent="UI" unique_id=1794794536]
visible = false
material = SubResource("ShaderMaterial_choun")
offset_left = -6.0
offset_top = -7.0
offset_right = 1788.0
offset_bottom = 1127.0

[node name="Hole" type="ColorRect" parent="UI" unique_id=840938637]
visible = false
material = SubResource("ShaderMaterial_ya4ey")
offset_left = 1.0
offset_top = -2.0
offset_right = 1617.0
offset_bottom = 1023.0

[node name="Stats" type="VBoxContainer" parent="UI" unique_id=69464197]
offset_right = 249.0
offset_bottom = 163.0
script = ExtResource("8_ya4ey")

[node name="SmileyPanel" type="Panel" parent="UI/Stats" unique_id=394940317]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 2.0

[node name="Smiley" type="Sprite2D" parent="UI/Stats/SmileyPanel" unique_id=1272820308]
visible = false
position = Vector2(121, 50.38)
scale = Vector2(0.75, 0.7)
texture = ExtResource("8_choun")

[node name="Default" type="AnimatedSprite2D" parent="UI/Stats/SmileyPanel" unique_id=1363842688]
position = Vector2(122, 50)
scale = Vector2(0.32038835, 0.32038835)
sprite_frames = SubResource("SpriteFrames_muem4")
animation = &"uncomfortable"
autoplay = "uncomfortable"

[node name="Disco" type="AnimatedSprite2D" parent="UI/Stats/SmileyPanel" unique_id=165359013]
visible = false
material = SubResource("ShaderMaterial_trceg")
position = Vector2(122, 50)
scale = Vector2(0.32, 0.32)
sprite_frames = SubResource("SpriteFrames_yc10j")
animation = &"disco"
autoplay = "disco"

[node name="Tony" type="AnimatedSprite2D" parent="UI/Stats/SmileyPanel" unique_id=119676368]
visible = false
position = Vector2(122, 50)
scale = Vector2(0.32, 0.32)
sprite_frames = SubResource("SpriteFrames_og1vs")
animation = &"tony"
autoplay = "tony"

[node name="TextPanel" type="Panel" parent="UI/Stats" unique_id=671969044]
layout_mode = 2
size_flags_vertical = 3

[node name="Label" type="Label" parent="UI/Stats/TextPanel" unique_id=1319085192]
layout_mode = 0
offset_left = 9.0
offset_top = 6.0
offset_right = 242.0
offset_bottom = 49.0
text = "You're fucked!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Enemy" parent="." unique_id=493197561 instance=ExtResource("15_jkv2x")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.8264327, 0.86076045, 2.1128287)

[connection signal="hit" from="Player" to="UI/Stats" method="hit"]
[connection signal="mask_collected" from="Player" to="UI/Stats" method="changeMask"]
